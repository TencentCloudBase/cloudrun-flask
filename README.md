# å¿«é€Ÿéƒ¨ç½² Flask åº”ç”¨

ä¸€ä¸ªå®Œæ•´çš„ Flask åº”ç”¨æ¨¡æ¿ï¼Œæ”¯æŒå¿«é€Ÿéƒ¨ç½²åˆ° CloudBase å¹³å°ã€‚

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md) | ä»é›¶å¼€å§‹åˆ›å»º Flask é¡¹ç›®çš„è¯¦ç»†æ­¥éª¤ | æ–°æ‰‹å…¥é—¨ã€é¡¹ç›®åˆå§‹åŒ– |
| [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md) | éƒ¨ç½²åˆ° CloudBase HTTP äº‘å‡½æ•°çš„å®Œæ•´æŒ‡å— | è½»é‡çº§ APIã€æŒ‰éœ€è®¡è´¹ |
| [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md) | éƒ¨ç½²åˆ° CloudBase äº‘æ‰˜ç®¡çš„å®Œæ•´æŒ‡å— | ä¼ä¸šåº”ç”¨ã€æŒç»­è¿è¡Œ |

### ğŸ¯ å¿«é€Ÿé€‰æ‹©æŒ‡å—

- **ğŸ†• æ–°æ‰‹å¼€å‘è€…** â†’ å…ˆçœ‹ [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md)
- **â˜ï¸ è½»é‡çº§éƒ¨ç½²** â†’ ä½¿ç”¨ [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md)
- **ğŸ¢ ä¼ä¸šçº§éƒ¨ç½²** â†’ ä½¿ç”¨ [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- [Python 3.8](https://www.python.org/downloads/) æˆ–æ›´é«˜ç‰ˆæœ¬
- äº†è§£åŸºæœ¬çš„ Python è™šæ‹Ÿç¯å¢ƒä½¿ç”¨
- è…¾è®¯äº‘è´¦å·å¹¶å¼€é€šäº† CloudBase æœåŠ¡
- åŸºæœ¬çš„ Python å’Œ Flask å¼€å‘çŸ¥è¯†

### åˆ›å»ºåº”ç”¨

```bash
# å¿«é€Ÿåˆ›å»ºï¼ˆåŸºç¡€æ­¥éª¤ï¼‰
mkdir cloudrun-flask && cd cloudrun-flask
python -m venv env
source env/bin/activate  # Windows: env\Scripts\activate
pip install Flask==3.1.2 gunicorn==24.1.1
```

### æœ¬åœ°æµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python app.py
# æˆ–è€…ä½¿ç”¨ Flask CLI
flask --app app run --host 0.0.0.0 --port 8080

# è®¿é—®åº”ç”¨
open http://localhost:8080
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
cloudrun-flask/
â”œâ”€â”€ app.py                   # Flask ä¸»åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–æ–‡ä»¶
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ docs/                   # ğŸ“š è¯¦ç»†æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ project-setup.md    # é¡¹ç›®åˆ›å»ºæŒ‡å—
â”‚   â”œâ”€â”€ http-function.md    # HTTP äº‘å‡½æ•°éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ cloud-run.md        # äº‘æ‰˜ç®¡éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ env/                    # è™šæ‹Ÿç¯å¢ƒï¼ˆæœ¬åœ°å¼€å‘ç”¨ï¼‰
â”œâ”€â”€ scf_bootstrap           # HTTP äº‘å‡½æ•°å¯åŠ¨è„šæœ¬
â”œâ”€â”€ Dockerfile              # äº‘æ‰˜ç®¡å®¹å™¨é…ç½®
â””â”€â”€ .dockerignore           # Docker å¿½ç•¥æ–‡ä»¶
```

## ğŸ¯ éƒ¨ç½²æ–¹å¼

### éƒ¨ç½²æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | HTTP äº‘å‡½æ•° | äº‘æ‰˜ç®¡ |
|------|------------|--------|
| **è®¡è´¹æ–¹å¼** | æŒ‰è¯·æ±‚æ¬¡æ•°å’Œæ‰§è¡Œæ—¶é—´ | æŒ‰èµ„æºä½¿ç”¨é‡ï¼ˆCPU/å†…å­˜ï¼‰ |
| **å¯åŠ¨æ–¹å¼** | å†·å¯åŠ¨ï¼ŒæŒ‰éœ€å¯åŠ¨ | æŒç»­è¿è¡Œ |
| **é€‚ç”¨åœºæ™¯** | API æœåŠ¡ã€è½»é‡çº§åº”ç”¨ | ä¼ä¸šçº§åº”ç”¨ã€å¤æ‚ Web åº”ç”¨ |
| **ç«¯å£è¦æ±‚** | å›ºå®š 9000 ç«¯å£ | å¯è‡ªå®šä¹‰ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰ |
| **æ‰©ç¼©å®¹** | è‡ªåŠ¨æŒ‰è¯·æ±‚æ‰©ç¼© | æ”¯æŒè‡ªåŠ¨æ‰©ç¼©å®¹é…ç½® |
| **Python ç¯å¢ƒ** | é¢„é…ç½® Python è¿è¡Œæ—¶ | å®Œå…¨è‡ªå®šä¹‰ Python ç¯å¢ƒ |

### é€‰æ‹©éƒ¨ç½²æ–¹å¼

- **é€‰æ‹© HTTP äº‘å‡½æ•°**ï¼šè½»é‡çº§ API æœåŠ¡ã€é—´æ­‡æ€§è®¿é—®ã€æˆæœ¬æ•æ„Ÿ
- **é€‰æ‹©äº‘æ‰˜ç®¡**ï¼šä¼ä¸šçº§åº”ç”¨ã€å¤æ‚ Web åº”ç”¨ã€éœ€è¦æ›´å¤šæ§åˆ¶æƒ

## ğŸ“š è¯¦ç»†éƒ¨ç½²æŒ‡å—

> **ğŸ’¡ æç¤º**ï¼šä»¥ä¸‹æ˜¯å¿«é€Ÿæ¦‚è§ˆï¼Œè¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹å¯¹åº”çš„ä¸“é—¨æ–‡æ¡£ã€‚

### ğŸ”¥ HTTP äº‘å‡½æ•°éƒ¨ç½²

é€‚åˆè½»é‡çº§åº”ç”¨å’Œ API æœåŠ¡ï¼ŒæŒ‰è¯·æ±‚è®¡è´¹ï¼Œå†·å¯åŠ¨å¿«ã€‚

**ç‰¹ç‚¹**ï¼š
- âœ… æŒ‰è¯·æ±‚æ¬¡æ•°è®¡è´¹ï¼Œæˆæœ¬ä½
- âœ… è‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨
- âœ… å†·å¯åŠ¨å¿«ï¼Œé€‚åˆé—´æ­‡æ€§è®¿é—®
- âš ï¸ å›ºå®šä½¿ç”¨ 9000 ç«¯å£

**ğŸ“– å®Œæ•´æŒ‡å—**ï¼š[HTTP äº‘å‡½æ•°éƒ¨ç½²æ–‡æ¡£](./docs/http-function.md)

**å¿«é€Ÿéƒ¨ç½²**ï¼š
```bash
# 1. åˆ›å»ºå¯åŠ¨è„šæœ¬
echo '#!/bin/bash
export PORT=9000
export PYTHONPATH="./env/lib/python3.10/site-packages:$PYTHONPATH"
/var/lang/python310/bin/python3.10 app.py' > scf_bootstrap

# 2. å®‰è£…ä¾èµ–åˆ° env ç›®å½•
pip install -r requirements.txt -t env/lib/python3.10/site-packages/

# 3. æ‰“åŒ…ä¸Šä¼ åˆ° CloudBase æ§åˆ¶å°
```

### ğŸ³ äº‘æ‰˜ç®¡éƒ¨ç½²

é€‚åˆä¼ä¸šçº§åº”ç”¨ï¼Œæ”¯æŒæ›´å¤æ‚çš„éƒ¨ç½²éœ€æ±‚ï¼Œå®¹å™¨åŒ–éƒ¨ç½²ã€‚

**ç‰¹ç‚¹**ï¼š
- âœ… æŒç»­è¿è¡Œï¼Œé€‚åˆä¼ä¸šçº§åº”ç”¨
- âœ… å®Œå…¨è‡ªå®šä¹‰ç¯å¢ƒå’Œç«¯å£
- âœ… æ”¯æŒå¤æ‚çš„ä¾èµ–å’Œé…ç½®
- âš ï¸ æŒ‰èµ„æºä½¿ç”¨é‡è®¡è´¹

**ğŸ“– å®Œæ•´æŒ‡å—**ï¼š[äº‘æ‰˜ç®¡éƒ¨ç½²æ–‡æ¡£](./docs/cloud-run.md)

**å¿«é€Ÿéƒ¨ç½²**ï¼š
```bash
# 1. æ„å»ºé•œåƒ
docker build -t flask-app .

# 2. æ¨é€åˆ° CloudBase é•œåƒä»“åº“
# 3. é€šè¿‡æ§åˆ¶å°æˆ– CLI éƒ¨ç½²
```

### ğŸ”§ é¡¹ç›®åˆ›å»º

å¦‚æœä½ æ˜¯æ–°æ‰‹æˆ–éœ€è¦ä»é›¶å¼€å§‹åˆ›å»ºé¡¹ç›®ï¼š

**ğŸ“– å®Œæ•´æŒ‡å—**ï¼š[é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md)

**å¿«é€Ÿåˆ›å»º**ï¼š
```bash
# åŸºç¡€é¡¹ç›®åˆ›å»º
mkdir my-flask-app && cd my-flask-app
python -m venv env
source env/bin/activate
pip install Flask gunicorn
```

## ğŸ”§ API æ¥å£

æœ¬æ¨¡æ¿åŒ…å«ä»¥ä¸‹ RESTful API æ¥å£ï¼š

### åŸºç¡€æ¥å£
```bash
GET /                        # æ¬¢è¿é¡µé¢
GET /health                  # å¥åº·æ£€æŸ¥
```

### ç”¨æˆ·ç®¡ç†
```bash
GET /api/users               # è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
GET /api/users/{user_id}     # è·å–å•ä¸ªç”¨æˆ·
POST /api/users              # åˆ›å»ºç”¨æˆ·
PUT /api/users/{user_id}     # æ›´æ–°ç”¨æˆ·
DELETE /api/users/{user_id}  # åˆ é™¤ç”¨æˆ·
```

### ç¤ºä¾‹è¯·æ±‚

```bash
# å¥åº·æ£€æŸ¥
curl https://your-app-url/health

# è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
curl "https://your-app-url/api/users?page=1&limit=5"

# åˆ›å»ºæ–°ç”¨æˆ·
curl -X POST https://your-app-url/api/users \
  -H "Content-Type: application/json" \
  -d '{"name":"æµ‹è¯•ç”¨æˆ·","email":"test@example.com"}'

# æ›´æ–°ç”¨æˆ·
curl -X PUT https://your-app-url/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{"name":"æ›´æ–°ç”¨æˆ·","email":"updated@example.com"}'

# åˆ é™¤ç”¨æˆ·
curl -X DELETE https://your-app-url/api/users/1
```

## â“ å¸¸è§é—®é¢˜

### ğŸš¨ éƒ¨ç½²ç›¸å…³é—®é¢˜

**Q: å¦‚ä½•é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼Ÿ**
A: 
- **è½»é‡çº§ API** â†’ [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md)
- **ä¼ä¸šçº§åº”ç”¨** â†’ [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md)
- **æ–°æ‰‹å…¥é—¨** â†’ [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md)

**Q: éƒ¨ç½²æ—¶é‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ**
A: æŸ¥çœ‹å¯¹åº”çš„éƒ¨ç½²æ–‡æ¡£ï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„æ•…éšœæ’é™¤æŒ‡å—ï¼š
- [HTTP äº‘å‡½æ•°å¸¸è§é—®é¢˜](./docs/http-function.md#å¸¸è§é—®é¢˜)
- [äº‘æ‰˜ç®¡å¸¸è§é—®é¢˜](./docs/cloud-run.md#å¸¸è§é—®é¢˜)

### âš™ï¸ é…ç½®ç›¸å…³

**ç«¯å£é…ç½®**ï¼š
- **HTTP äº‘å‡½æ•°**ï¼šå¿…é¡»ä½¿ç”¨ 9000 ç«¯å£
- **äº‘æ‰˜ç®¡**ï¼šæ¨èä½¿ç”¨ 8080 ç«¯å£ï¼Œæ”¯æŒè‡ªå®šä¹‰

**æ–‡ä»¶è¦æ±‚**ï¼š
- **HTTP äº‘å‡½æ•°**ï¼šéœ€è¦ `scf_bootstrap` å¯åŠ¨è„šæœ¬å’Œ `env` ç›®å½•
- **äº‘æ‰˜ç®¡**ï¼šéœ€è¦ `Dockerfile` å’Œ `.dockerignore`

### ğŸ’¾ æ•°æ®å­˜å‚¨

**å½“å‰é…ç½®**ï¼š
- ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼ˆé‡å¯åæ•°æ®ä¸¢å¤±ï¼‰
- é€‚åˆæ¼”ç¤ºå’Œæµ‹è¯•ç¯å¢ƒ

**ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
- é›†æˆæ•°æ®åº“ï¼ˆPostgreSQLã€MySQL ç­‰ï¼‰
- ä½¿ç”¨ Flask-SQLAlchemy è¿›è¡Œ ORM æ“ä½œ
- è¯¦ç»†é…ç½®è¯·æŸ¥çœ‹å„éƒ¨ç½²æ–‡æ¡£

### ğŸ“– æ›´å¤šå¸®åŠ©

å¦‚éœ€æ›´è¯¦ç»†çš„å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹ï¼š
- [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md) - å®Œæ•´çš„é¡¹ç›®åˆ›å»ºæµç¨‹
- [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md) - äº‘å‡½æ•°éƒ¨ç½²è¯¦ç»†æ­¥éª¤
- [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md) - äº‘æ‰˜ç®¡éƒ¨ç½²è¯¦ç»†æ­¥éª¤

## ğŸ› ï¸ å¼€å‘å·¥å…·

### æ¨èçš„å¼€å‘ä¾èµ–

```bash
# æ ¸å¿ƒæ¡†æ¶
pip install Flask==3.1.2

# ç”Ÿäº§æœåŠ¡å™¨
pip install gunicorn==24.1.1

# æ•°æ®åº“æ”¯æŒ
pip install Flask-SQLAlchemy psycopg2-binary

# ç¯å¢ƒå˜é‡
pip install python-dotenv==1.2.1

# API å¼€å‘
pip install Flask-RESTful Flask-CORS
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# åº”ç”¨é…ç½®
DEBUG=True
SECRET_KEY=your-secret-key-here
FLASK_ENV=development
PORT=8080

# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼‰
DATABASE_URL=postgresql://user:password@localhost/dbname
```

## ğŸ“– è¿›é˜¶åŠŸèƒ½

- **è“å›¾æ”¯æŒ**ï¼šæ¨¡å—åŒ–åº”ç”¨ç»“æ„
- **æ¨¡æ¿å¼•æ“**ï¼šJinja2 æ¨¡æ¿æ”¯æŒ
- **æ•°æ®åº“é›†æˆ**ï¼šSQLAlchemy ORM æ”¯æŒ
- **ä¼šè¯ç®¡ç†**ï¼šFlask-Session æ”¯æŒ
- **è®¤è¯æˆæƒ**ï¼šFlask-Login å’Œ Flask-JWT æ”¯æŒ
- **API æ–‡æ¡£**ï¼šFlask-RESTX è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ

## ğŸ”— ç›¸å…³é“¾æ¥

### ğŸ“š é¡¹ç›®æ–‡æ¡£
- [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md) - ä»é›¶å¼€å§‹åˆ›å»º Flask é¡¹ç›®
- [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md) - è½»é‡çº§äº‘å‡½æ•°éƒ¨ç½²æ–¹æ¡ˆ
- [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md) - ä¼ä¸šçº§å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ

### ğŸŒ å®˜æ–¹æ–‡æ¡£
- [CloudBase å®˜æ–¹æ–‡æ¡£](https://docs.cloudbase.net/)
- [Flask å®˜æ–¹æ–‡æ¡£](https://flask.palletsprojects.com/)
- [Python å®˜æ–¹æ–‡æ¡£](https://docs.python.org/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** 

- ğŸ†• **æ–°æ‰‹å…¥é—¨** â†’ [é¡¹ç›®åˆ›å»ºæŒ‡å—](./docs/project-setup.md)
- â˜ï¸ **äº‘å‡½æ•°éƒ¨ç½²** â†’ [HTTP äº‘å‡½æ•°éƒ¨ç½²](./docs/http-function.md)
- ğŸ³ **å®¹å™¨éƒ¨ç½²** â†’ [äº‘æ‰˜ç®¡éƒ¨ç½²](./docs/cloud-run.md)
- ğŸ“– **Flask å®˜æ–¹æ–‡æ¡£** â†’ [Flask å¿«é€Ÿå…¥é—¨](https://flask.palletsprojects.com/quickstart/)